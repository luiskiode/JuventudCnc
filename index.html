<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Juventud CNC</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0b1020" />
  <link rel="stylesheet" href="styles.css" />

  <!-- SDKs -->
  <script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>

  <!-- Config -->
  <script src="supabase-config.js" defer></script>

  <!-- Core -->
  <script src="app.js" defer></script>
</head>

<body class="app-shell">

  <!-- OVERLAY GLOBAL -->
  <div id="overlay" class="overlay" aria-hidden="true"></div>

  <!-- DRAWER -->
  <aside id="drawer" class="drawer" aria-label="MenÃº lateral">
    <div class="drawer-header">
      <h2>Juventud CNC</h2>
      <button id="closeDrawer" class="icon-btn" type="button" aria-label="Cerrar menÃº">âœ•</button>
    </div>

    <nav class="drawer-nav" aria-label="Secciones">
      <a href="#inicio" data-tab="inicio">ğŸ  Inicio</a>
      <a href="#eventos" data-tab="eventos">ğŸ“… Eventos</a>
      <a href="#comunidad" data-tab="comunidad">ğŸ‘¥ Comunidad</a>

      <hr />

      <a href="#perfil" data-tab="perfil">ğŸ‘¤ Mi perfil</a>
      <a href="#judart" data-tab="judart">ğŸ¨ Judart</a>
      <a href="#recursos" data-tab="recursos">ğŸ“‚ Recursos</a>

      <hr />

      <a href="#miembros-activos" data-tab="miembros-activos">â­ Miembros</a>
    </nav>

    <footer class="drawer-footer">
      v1.0 Â· Juventud CNC ğŸ’™ğŸ’—
    </footer>
  </aside>

  <!-- TOPBAR -->
  <header class="topbar" role="banner">
    <button id="openDrawer" class="icon-btn" type="button" aria-label="Abrir menÃº">â˜°</button>

    <h1 class="topbar-title">Juventud CNC</h1>

    <div class="topbar-actions" aria-label="Acciones">
      <select id="themePicker" class="theme-picker" aria-label="Tema">
        <option value="auto">Auto</option>
        <option value="chicos">Chicos ğŸ’™</option>
        <option value="chicas">Chicas ğŸ’—</option>
        <option value="mix">Mix ğŸ’™ğŸ’—</option>
      </select>

      <!-- ğŸ¤– (Se inyecta desde app.js si no existe; lo dejamos listo para estilos/orden) -->
      <button id="btnBots" class="icon-btn" type="button" title="Encender / Apagar bots" aria-label="Encender o apagar bots">ğŸ¤–</button>

      <!-- Angie -->
      <button id="btnAngie" class="icon-btn" type="button" title="DiseÃ±o Angie" aria-label="DiseÃ±o Angie">ğŸ¨</button>

      <!-- Perfil -->
      <button id="btnPerfil" class="icon-btn" type="button" data-tab="perfil" title="Mi perfil" aria-label="Mi perfil">ğŸ‘¤</button>
    </div>
  </header>

  <!-- CONTENIDO -->
  <main class="container" id="main">

    <!-- INICIO -->
    <section class="view active" data-view="inicio" aria-label="Inicio">
      <section class="card" id="mensaje-semanal">
        <header class="card-header">
          <h2 class="with-emoji" data-emoji="ğŸ•Šï¸">Mensaje semanal</h2>
          <span class="badge badge-mix">Para todos</span>
        </header>

        <article class="card-body">
          <h3 id="msgTitle">Cargando mensaje...</h3>
          <p id="msgBody">Un momentoâ€¦</p>
          <small id="msgMeta"></small>
        </article>
      </section>

      <section class="card hero" aria-label="Bienvenida">
        <div>
          <h2>Bienvenido a Juventud CNC</h2>
          <p>Un espacio para crecer, servir y caminar juntos.</p>
          <p class="small" style="margin-top:8px; opacity:.95">
            Consejo rÃ¡pido: usa <strong>ğŸ¤–</strong> para encender/apagar bots, y <strong>ğŸ¨</strong> para el diseÃ±o de Angie.
          </p>
        </div>
      </section>

      <section class="card" aria-label="Eventos prÃ³ximos">
        <div class="card-header">
          <h3 class="with-emoji" data-emoji="ğŸ“…">PrÃ³ximos eventos</h3>
          <a href="#eventos" data-tab="eventos" class="link">Ver todos</a>
        </div>
        <ul id="eventListHome" class="event-list"></ul>
      </section>
    </section>

    <!-- EVENTOS -->
    <section class="view" data-view="eventos" aria-label="Eventos">
      <section class="card">
        <header class="card-header">
          <h2 class="with-emoji" data-emoji="ğŸ“…">Eventos</h2>
          <select id="filtroTipo" aria-label="Filtrar por tipo">
            <option value="">Todos</option>
            <option value="formacion">FormaciÃ³n</option>
            <option value="servicio">Servicio</option>
            <option value="convivencia">Convivencia</option>
            <option value="oracion">OraciÃ³n</option>
          </select>
        </header>

        <form id="formEvento" class="grid perfil-form" aria-label="Crear evento">
          <input id="evTitulo" placeholder="TÃ­tulo" required />
          <input id="evFecha" type="datetime-local" required />
          <input id="evLugar" placeholder="Lugar" />
          <select id="evTipo" aria-label="Tipo">
            <option value="">Tipo</option>
            <option value="formacion">FormaciÃ³n</option>
            <option value="servicio">Servicio</option>
            <option value="convivencia">Convivencia</option>
            <option value="oracion">OraciÃ³n</option>
          </select>
          <button class="btn small" type="submit">Guardar</button>
          <p id="evEstado" class="small muted"></p>
        </form>

        <ul id="eventList" class="event-list"></ul>
      </section>
    </section>

    <!-- COMUNIDAD -->
    <section class="view" data-view="comunidad" aria-label="Comunidad">
      <section class="card">
        <h2 class="with-emoji" data-emoji="ğŸ‘¥">Comunidad</h2>
        <p class="muted">Espacios de participaciÃ³n juvenil.</p>

        <div class="grid" style="margin-top:12px; gap:10px">
          <div class="card" style="padding:12px">
            <h3 class="with-emoji" data-emoji="ğŸ¤">Servicio</h3>
            <p class="small muted">Actividades para ayudar y acompaÃ±ar.</p>
          </div>
          <div class="card" style="padding:12px">
            <h3 class="with-emoji" data-emoji="ğŸ“–">FormaciÃ³n</h3>
            <p class="small muted">GuÃ­as, temas y crecimiento.</p>
          </div>
          <div class="card" style="padding:12px">
            <h3 class="with-emoji" data-emoji="ğŸ™">OraciÃ³n</h3>
            <p class="small muted">Momentos para pausar y ofrecer.</p>
          </div>
        </div>
      </section>
    </section>

    <!-- PERFIL -->
    <section class="view" data-view="perfil" aria-label="Perfil">
      <section class="card perfil-card">
        <h2 class="with-emoji" data-emoji="ğŸ‘¤">Mi perfil</h2>

        <div class="perfil-resumen">
          <div>
            <strong id="perfilNombreTexto">AÃºn sin registrar</strong>
            <div id="perfilRolTexto" class="small muted"></div>
          </div>
          <button id="btnCerrarPerfil" class="btn small" type="button" style="display:none">
            Cerrar sesiÃ³n
          </button>
        </div>

        <p id="perfilFraseTexto" class="perfil-frase">
          AquÃ­ aparecerÃ¡ tu frase.
        </p>

        <p id="perfilEstado" class="small muted"></p>

        <form id="formMiembro" class="grid perfil-form" aria-label="Formulario de perfil">
          <input name="nombre" placeholder="Nombre completo" required />
          <input name="edad" type="number" min="10" max="99" placeholder="Edad" required />
          <input name="contacto" placeholder="Celular" />
          <input name="ministerio" placeholder="Ministerio (opcional)" />

          <select name="rol_key" aria-label="Rol">
            <option value="miembro">Miembro</option>
            <option value="voluntario">Voluntario digital</option>
            <option value="moderador">Moderador</option>
          </select>

          <input name="frase" placeholder="Frase personal" />
          <button class="btn" type="submit">Guardar perfil</button>
        </form>
      </section>
    </section>

    <!-- JUDART -->
    <section class="view" data-view="judart" aria-label="Judart">
      <section class="card">
        <h2 class="with-emoji" data-emoji="ğŸ¨">Judart</h2>
        <p class="muted">Espacio creativo: arte, ilustraciÃ³n, identidad juvenil.</p>

        <div class="grid" style="margin-top:12px; gap:10px">
          <div class="card" style="padding:12px">
            <h3 class="with-emoji" data-emoji="ğŸ–¼ï¸">GalerÃ­a</h3>
            <p class="small muted">PrÃ³ximamente: mural digital, fotos, artes del grupo.</p>
          </div>
          <div class="card" style="padding:12px">
            <h3 class="with-emoji" data-emoji="âœ¨">Identidad</h3>
            <p class="small muted">Logos, colores, estilos y diseÃ±os.</p>
          </div>
          <div class="card" style="padding:12px">
            <h3 class="with-emoji" data-emoji="ğŸ“Œ">Avisos</h3>
            <p class="small muted">Los avisos ahora viven aquÃ­ (modo creativo).</p>
          </div>
        </div>

        <!-- Compat: si en algÃºn momento tenÃ­as un botÃ³n de notificaciones, app.js lo redirige a Judart -->
        <button id="btnPermPush" class="btn" type="button" style="margin-top:12px">
          Abrir Judart (modo arte)
        </button>
      </section>
    </section>

    <!-- RECURSOS -->
    <section class="view" data-view="recursos" aria-label="Recursos">
      <section class="card">
        <div class="card-header">
          <h2 class="with-emoji" data-emoji="ğŸ“‚">Recursos</h2>
          <small class="muted">Tip: en esta vista el botÃ³n <strong>ï¼‹</strong> abre el selector de archivos</small>
        </div>

        <!-- input oculto que usa app.js -->
        <input id="fileRec" type="file" style="display:none" />

        <div id="listaRecursos"></div>
      </section>
    </section>

    <!-- MIEMBROS -->
    <section class="view" data-view="miembros-activos" aria-label="Miembros">
      <section class="card">
        <h2 class="with-emoji" data-emoji="â­">Miembros registrados</h2>
        <ul id="listaMiembros" class="user-list"></ul>
      </section>
    </section>

  </main>

  <!-- TABS -->
  <nav class="tabs" aria-label="NavegaciÃ³n inferior">
    <button class="tab active" type="button" data-tab="inicio">ğŸ <span>Inicio</span></button>
    <button class="tab" type="button" data-tab="eventos">ğŸ“…<span>Eventos</span></button>
    <button class="tab" type="button" data-tab="comunidad">ğŸ‘¥<span>Comunidad</span></button>
    <button class="tab" type="button" data-tab="recursos">ğŸ“‚<span>Recursos</span></button>
    <button class="tab" type="button" data-tab="judart">ğŸ¨<span>Judart</span></button>
  </nav>

  <!-- FAB (acciÃ³n rÃ¡pida) -->
  <button id="fab" class="fab" type="button" aria-label="AcciÃ³n rÃ¡pida">ï¼‹</button>

  <!-- =========================
       WIDGETS BOTS (Angie / Mia / Ciro)
       app.js espera estos IDs
       ========================= -->

  <!-- Angie -->
  <div id="angieWidget" class="angie-widget" aria-label="Angie">
    <div class="bot-bubble angie-bubble">
      <button id="angieClose" class="bot-close" type="button" aria-label="Cerrar Angie">âœ•</button>
      <div class="bot-name angie-name">Angie</div>
      <div id="angieText">Â¡Holaaa! QuÃ© bueno verte ğŸ˜„</div>
    </div>

    <div class="bot-avatar angie-avatar">
      <img id="angieAvatarImg" src="assets/angie-feliz-saludo.png" alt="Angie" />
    </div>
  </div>

  <!-- Mia -->
  <div id="miaWidget" class="mia-widget" aria-label="Mia">
    <div class="bot-bubble mia-bubble">
      <button id="miaClose" class="bot-close" type="button" aria-label="Cerrar Mia">âœ•</button>
      <div class="bot-name mia-name">Mia</div>
      <div id="miaText">Soy Mia. AquÃ­ todo lo coordinamos con calma ğŸ’—</div>
    </div>

    <div class="bot-avatar mia-avatar">
      <img id="miaAvatarImg" src="assets/mia-casual.png" alt="Mia" />
    </div>
  </div>

  <!-- Ciro -->
  <div id="ciroWidget" class="ciro-widget" aria-label="Ciro">
    <div class="bot-bubble ciro-bubble">
      <button id="ciroClose" class="bot-close" type="button" aria-label="Cerrar Ciro">âœ•</button>
      <div class="bot-name ciro-name">Ciro</div>
      <div id="ciroText">Â¡Holaaa! Â¡Vamos con fuerza! ğŸ’ªğŸ”¥</div>
    </div>

    <div class="bot-avatar ciro-avatar">
      <img id="ciroAvatarImg" src="assets/ciro-happy.png" alt="Ciro" />
    </div>
  </div>

  <!-- CHAT BOTS (app.js lo crea si falta, pero aquÃ­ queda fijo y pulido) -->
  <section id="jcChat" class="jc-chat" aria-label="Chat de bots">
    <header class="jc-chat-header">
      <div class="jc-chat-title">
        <span class="dot-online" aria-hidden="true"></span>
        <span>Chat bots</span>
      </div>
      <button class="jc-chat-toggle" id="jcChatToggle" type="button" aria-label="Colapsar chat">âŒ„</button>
    </header>
    <div class="jc-chat-body" id="jcChatBody"></div>
  </section>

</body>
</html>
