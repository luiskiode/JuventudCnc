<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Juventud CNC</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
  <!-- SDKs -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.2/firebase-messaging-compat.js"></script>
  <!-- Configs (pon tus claves) -->
  <script defer src="supabase-config.js"></script>
  <script defer src="firebase-config.js"></script>
  <meta name="theme-color" content="#0A2B7A" />
</head>
<body>
  <!-- Drawer lateral -->
  <aside id="drawer" class="drawer">
    <div class="drawer-header">
      <h2>Juventud CNC</h2>
      <button id="closeDrawer" aria-label="Cerrar">✕</button>
    </div>
    <nav class="drawer-nav">
      <a href="#inicio" data-tab="inicio">Inicio</a>
      <a href="#eventos" data-tab="eventos">Eventos</a>
      <a href="#comunidad" data-tab="comunidad">Comunidad</a>
      <a href="#recursos" data-tab="recursos">Recursos</a>
      <a href="#avisos" data-tab="avisos">Avisos</a>
    </nav>
    <footer class="drawer-footer">v1.2 • Hecho con ❤</footer>
  </aside>

  <!-- Overlay -->
  <div id="overlay" class="overlay" tabindex="-1" aria-hidden="true"></div>

  <!-- Topbar -->
  <header class="topbar">
    <button id="openDrawer" class="icon-btn" aria-label="Menú">☰</button>
    <h1>Juventud CNC</h1>
    <button id="btnPerfil" class="icon-btn" aria-label="Perfil">👤</button>
  </header>

  <!-- Vistas -->
  <main class="container">
    <!-- INICIO -->
   <section class="card" id="mensaje-semanal">
  <div class="flex">
    <h3 class="with-emoji" data-emoji="📝">Mensaje Semanal</h3>
    <button id="btnEditMsg" class="btn small adminOnly" hidden>Editar</button>
  </div>
  <article id="msgContent">
    <h4 id="msgTitle">Esperanza viva 💙✨</h4>
    <p id="msgBody">
      Queridos jóvenes 🙌, ustedes son la esperanza viva 🌟 de una Iglesia en camino ⛪🚶‍♀️🚶‍♂️.
      Gracias por su presencia y por su contribución a la vida del Cuerpo de Cristo ✝️.<br><br>
      Les pido: ¡no dejen de traer ese ‘lío’ bueno 🔥 que sacude y renueva!, ese empuje 🚀 de un motor limpio y ágil 🛠️,
      y su modo original 😊 de vivir y anunciar la alegría de Jesús Resucitado ✨.<br><br>
      Rezo por ello 🙏; y ustedes también, por favor, recen por mí. 🤝
    </p>
    <small id="msgMeta">Papa Fracisco • ahora</small>
  </article>
</section>

      <section class="card hero">
        <h2>¡Bienvenido a Juventud CNC!</h2>
        <p>Tu espacio para conectar, crecer y vivir la fe.</p>
        <div class="hero-icons" aria-hidden="true">💙 🙂</div>
      </section>

      <section class="card">
        <div class="flex">
          <h3 class="with-emoji" data-emoji="📅">Próximos Eventos</h3>
          <a class="link" href="#eventos" data-tab="eventos">Ver todos</a>
        </div>
        <ul id="eventListHome" class="event-list"></ul>
      </section>
    </section>

    <!-- EVENTOS -->
    <section class="view" id="view-eventos" data-view="eventos" tabindex="-1">
      <section class="card">
        <div class="flex">
          <h3 class="with-emoji" data-emoji="🗓️">Próximos Eventos</h3>
          <select id="filtroTipo" class="select">
            <option value="">Todos</option>
            <option>reunión</option>
            <option>formación</option>
            <option>retiro</option>
            <option>vigilia</option>
            <option>voluntariado</option>
          </select>
        </div>
        <ul id="eventList" class="event-list"></ul>
      </section>
    </section>

    <!-- COMUNIDAD -->
    <section class="view" id="view-comunidad" data-view="comunidad" tabindex="-1">
      <section class="card" id="miembros">
        <h3 class="with-emoji" data-emoji="👥">Registro de Miembros</h3>
        <form id="formMiembro" class="grid">
          <input name="nombre" placeholder="Nombre y Apellido" required />
          <input name="edad" type="number" placeholder="Edad" min="10" max="99" required />
          <input name="contacto" type="tel" placeholder="Contacto (celular)" />
          <input name="ministerio" placeholder="Ministerio/Grupo (opcional)" />
          <select name="rol_key">
            <option value="miembro">Miembro</option>
            <option value="moderador">Moderador</option>
          </select>
          <button class="btn" type="submit">Guardar</button>
        </form>
      </section>

      <section class="card">
        <h3 class="with-emoji" data-emoji="⭐">Comunidad Activa</h3>
        <div class="grid grid-compact">
          <button class="chip" data-action="retos">⭐ Retos / Dinámicas</button>
          <button class="chip" data-action="noticias">📰 Noticias parroquiales</button>
          <button class="chip" data-action="multimedia">🎶 Multimedia</button>
          <button class="chip" data-action="foro">💬 Foro Joven</button>
        </div>
        <p class="muted">(Estas secciones se habilitan por fases.)</p>
      </section>
    </section>

    <!-- RECURSOS -->
    <section class="view" id="view-recursos" data-view="recursos" tabindex="-1">
      <section class="card" id="recursos">
        <div class="flex">
          <h3 class="with-emoji" data-emoji="📂">Recursos</h3>
          <label class="btn small adminOnly" hidden>
            Subir archivo <input id="fileRec" type="file" hidden />
          </label>
        </div>
        <ul id="listaRecursos" class="file-list"></ul>
      </section>
    </section>

    <!-- AVISOS -->
    <section class="view" id="view-avisos" data-view="avisos" tabindex="-1">
      <section class="card">
        <div class="flex">
          <h3 class="with-emoji" data-emoji="🔔">Avisos</h3>
          <button id="btnPermPush" class="btn small">Activar notificaciones</button>
        </div>
        <ul id="avisosList" class="notice-list"></ul>
      </section>
    </section>
  </main>

  <!-- Tabs -->
  <nav class="tabs" role="tablist" aria-label="Secciones principales">
    <button class="tab active" data-tab="inicio" role="tab" aria-selected="true">🏠<span>Inicio</span></button>
    <button class="tab" data-tab="eventos" role="tab" aria-selected="false">📅<span>Eventos</span></button>
    <button class="tab" data-tab="comunidad" role="tab" aria-selected="false">👥<span>Comunidad</span></button>
    <button class="tab" data-tab="recursos" role="tab" aria-selected="false">📂<span>Recursos</span></button>
    <button class="tab" data-tab="avisos" role="tab" aria-selected="false">🔔<span>Avisos</span></button>
  </nav>

  <!-- FAB -->
  <button id="fab" class="fab" title="Acción rápida">＋</button>

  <!-- App -->
  <script src="app.js"></script>
</body>
</html>